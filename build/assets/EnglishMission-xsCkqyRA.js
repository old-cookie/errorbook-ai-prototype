import{c as r,r as i,j as e}from"./index-BfPEUJob.js";import{B as w}from"./Button-Cjd3NleT.js";import{C as m}from"./Card-jmBPj9oo.js";import{E as C}from"./EriCharacterSvg-BWiiiQiv.js";import{a as E}from"./appState-CC8KP1bt.js";import{C as M}from"./chevron-left-CdZEQacz.js";import{m as S}from"./proxy-BIvXrzeu.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],I=r("mic",L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],T=r("pencil-line",z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],P=r("volume-2",Q),o=[{phase:"write",title:"Write",demoQuestion:"Demo Question: What did you do after school today?",instruction:"Write 2-3 sentences about your school day in English.",coachLine:"Start simple. Focus on clear subject + verb + detail.",cta:"Continue to Speak"},{phase:"speak",title:"Speak",demoQuestion:'Demo Question: Please say, "Today I practiced English with Eri."',instruction:"Say your answer out loud once. Eri is listening to your voice.",coachLine:"Speak slowly and clearly. Keep each sentence short.",cta:"I Finished Speaking"},{phase:"listening",title:"Listening",demoQuestion:'Demo Question: Listen and repeat, "I can learn one step at a time."',instruction:"Listen to Eri's prompt, then repeat the key phrase once.",coachLine:"Catch key words first, then repeat with confidence.",cta:"I Finished Listening"}],_={write:e.jsx(T,{size:16,className:"text-[#6C5CE7]"}),speak:e.jsx(I,{size:16,className:"text-[#6C5CE7]"}),listening:e.jsx(P,{size:16,className:"text-[#6C5CE7]"})},$={write:"thinking",speak:"listening",listening:"speaking"};function H({onNavigate:p,onBack:x}){const[c]=i.useState(()=>E()),[a,g]=i.useState(0),[n,u]=i.useState(""),[l,y]=i.useState(0),[d,b]=i.useState(0),[f]=i.useState(()=>`english-${Date.now()}`),s=o[a],h=a===o.length-1,j=i.useMemo(()=>o.slice(0,a+1).map(t=>t.phase),[a]),k=s.phase!=="write"||n.trim().length>=12,N=()=>{p("session-results",{sessionId:f,score:3,total:3,hintsUsed:0,missionMode:"english",english:{completedPhases:j,writeChars:n.trim().length,speakTurns:l,listeningTurns:d}})},v=()=>{if(s.phase==="speak"&&y(t=>t+1),s.phase==="listening"&&b(t=>t+1),h){N();return}g(t=>t+1)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-28",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-5 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors -ml-2",children:e.jsx(M,{size:24,className:"text-gray-700"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"English Mission"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[a+1," / 3"]})]})}),e.jsx("div",{className:"px-5 pt-3",children:e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(S.div,{initial:{width:0},animate:{width:`${(a+1)/3*100}%`},className:"h-full bg-[#6C5CE7]",transition:{type:"spring",damping:20}})})}),e.jsxs("div",{className:"px-5 pt-5 pb-8 space-y-4",children:[e.jsxs(m,{padding:"md",className:"border-[#6C5CE7]/20 bg-[#6C5CE7]/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[_[s.phase],e.jsx("p",{className:"text-sm font-semibold text-[#6C5CE7] uppercase tracking-wide",children:s.title})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-800 mt-3",children:s.demoQuestion}),e.jsx("p",{className:"text-base font-semibold text-gray-900 mt-3",children:s.instruction}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Eri: ",s.coachLine]})]}),s.phase==="write"?e.jsxs(m,{padding:"md",className:"py-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your writing"}),e.jsx("textarea",{value:n,onChange:t=>u(t.target.value),placeholder:"Today I had math class. I learned fractions...",className:"w-full min-h-[160px] rounded-xl border-2 border-gray-200 focus:border-[#6C5CE7] focus:outline-none p-4 text-base"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Minimum 12 characters to continue."})]}):e.jsxs("div",{className:"min-h-[420px] rounded-3xl bg-white border border-gray-200 flex flex-col items-center justify-center px-8 py-8 text-center",children:[c.showEri&&e.jsx(C,{state:$[s.phase],reduceMotion:c.reduceMotion,size:188,className:"mb-3"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:s.phase==="speak"?"Speak now. Eri is listening to you in the middle stage.":"Listen now. Eri is speaking in the middle stage."}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.phase==="speak"?`Speaking turns: ${l}`:`Listening turns: ${d}`})]}),e.jsx("div",{className:"pt-1",children:e.jsx(w,{onClick:v,fullWidth:!0,size:"lg",disabled:!k,children:h?"Finish Mission":s.cta})})]})]})}export{H as EnglishMission};
